library(formattable)
formattable(df, list(age = color_tile("white", "orange"), grade = formatter("span", 
    style = x ~ ifelse(x == "A", style(color = "green", font.weight = "bold"), NA)), 
    area(col = c(test1_score, test2_score)) ~ normalize_bar("pink", 0.2), final_score = formatter("span", 
        style = x ~ style(color = ifelse(rank(-x) <= 3, "green", "gray")), x ~ sprintf("%.2f (rank: %02d)", 
            x, rank(-x))), registered = formatter("span", style = x ~ style(color = ifelse(x, 
        "green", "red")), x ~ icontext(ifelse(x, "ok", "remove"), ifelse(x, "Yes", 
        "No")))))
